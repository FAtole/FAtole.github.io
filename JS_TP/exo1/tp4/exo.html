<html>

<head>
    <SCRIPT LANGUAGE="Javascript" SRC="Croix.js"></SCRIPT>

</head>

<body onload='init()'>
    <canvas id="myCanvas" width="800" height="800"></canvas>



</body>

<script>
    var canvas;
    var interval;
    var c;

    function init() {
        canvas = document.getElementById('myCanvas');
    };

    if (window.Worker) {
        const objectsList = new Array();

        objectsList.push(new Worker("esclave.js"));

        function Start() {
            objectsList.forEach(element => element.postMessage("start"));
        }
        function Recoit() {
            objectsList.forEach(element => element.onmessage = function (e) {
                c = new Croix(e.data[0], e.data[1], canvas,"red");
                c.draw();
                console.log(e.data+' Message received from worker');
            });
        }

        interval = setInterval(() => {
            Start();
            Recoit();
        }, 1000);

    } else {
        console.log('Your browser doesn\'t support web workers.')
    }
</script>


</html>