<html>

<head>
    <SCRIPT LANGUAGE="Javascript" SRC="Croix.js"></SCRIPT>

</head>

<body onload='init()'>
    <canvas id="myCanvas" width="800" height="800"></canvas>



</body>

<script>
    var canvas;
    var interval;
    var c;

    function init() {
        canvas = document.getElementById('myCanvas');
    };

    if (window.Worker) {
        const objectsList = new Array();

        objectsList.push([new Worker("worker.js"), "red"]);
        objectsList.push([new Worker("worker.js"), "green"]);
        objectsList.push([new Worker("worker.js"), "blue"]);
        objectsList.push([new Worker("worker.js"), "orange"]);
        objectsList.push([new Worker("worker.js"), "cyan"]);
        objectsList.push([new Worker("worker.js"), "black"]);


        function Start() {
            objectsList.forEach(element => element[0].postMessage("start"));
        }
        function Recoit() {
            objectsList.forEach(element => element[0].onmessage = function (e) {
                c = new Croix(e.data[0], e.data[1], canvas, element[1]);
                c.draw();
                console.log(e.data);
            });
        }

        interval = setInterval(() => {
            Start();
            Recoit();
        }, 1000);

    } else {
        console.log('Your browser doesn\'t support web workers.')
    }
</script>


</html>